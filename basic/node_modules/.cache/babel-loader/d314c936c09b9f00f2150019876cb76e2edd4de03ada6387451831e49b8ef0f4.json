{"ast":null,"code":"// PopupMap.js\nimport React,{useEffect,useState}from'react';import mapboxgl from'mapbox-gl';import'mapbox-gl/dist/mapbox-gl.css';import{jsx as _jsx}from\"react/jsx-runtime\";const PopupMap=()=>{const[popupPosts,setPopupPosts]=useState([]);// Use a simplified dummy data for testing\nconst dummyPopupPosts=[{title:'Dummy Point 1',description:'This is the first dummy point',coordinates:[-71.118,42.375]},{title:'Dummy Point 2',description:'This is the second dummy point',coordinates:[-71.115,42.378]}];useEffect(()=>{// Simulate fetching previously submitted popup posts from the database\nsetPopupPosts(dummyPopupPosts);},[]);useEffect(()=>{mapboxgl.accessToken='pk.eyJ1Ijoid3d3c3NzIiwiYSI6ImNscGl0YjQybDAybWcybG91Ynd6bTAxeWMifQ.b4pItpBiNsKBSQ2bmV-Wuw';const bounds=[[-71.119340,42.373465],[-71.114128,42.380368]];const map=new mapboxgl.Map({container:'popup-map-container',style:'mapbox://styles/mapbox/streets-v12',center:[-71.11671,42.37443],zoom:15,maxBounds:bounds});if(popupPosts.length>0){// Add a layer for previously submitted popup posts\nmap.on('load',()=>{map.addLayer({id:'previousPopups',type:'symbol',source:{type:'geojson',data:{type:'FeatureCollection',features:popupPosts.map(post=>({type:'Feature',geometry:{type:'Point',coordinates:post.coordinates},properties:{title:post.title,description:post.description}}))}},layout:{'icon-image':'marker-15','text-field':['get','title'],'text-font':['Open Sans Semibold','Arial Unicode MS Bold'],'text-offset':[0,1.5],'text-anchor':'top'}});// Create a popup on click for previously submitted popup posts\nmap.on('click','previousPopups',e=>{const coordinates=e.features[0].geometry.coordinates.slice();const description=e.features[0].properties.description;new mapboxgl.Popup().setLngLat(coordinates).setHTML(\"<h1>\".concat(description,\"</h1>\")).addTo(map);});// Change the cursor to a pointer when hovering over the previousPopups layer\nmap.on('mouseenter','previousPopups',()=>{map.getCanvas().style.cursor='pointer';});// Change it back to the default cursor when leaving the previousPopups layer\nmap.on('mouseleave','previousPopups',()=>{map.getCanvas().style.cursor='';});});}// Cleanup the map on component unmount\nreturn()=>map.remove();},[popupPosts]);return/*#__PURE__*/_jsx(\"div\",{id:\"popup-map-container\",style:{position:'absolute',top:0,bottom:0,width:'100%'}});};export default PopupMap;","map":{"version":3,"names":["React","useEffect","useState","mapboxgl","jsx","_jsx","PopupMap","popupPosts","setPopupPosts","dummyPopupPosts","title","description","coordinates","accessToken","bounds","map","Map","container","style","center","zoom","maxBounds","length","on","addLayer","id","type","source","data","features","post","geometry","properties","layout","e","slice","Popup","setLngLat","setHTML","concat","addTo","getCanvas","cursor","remove","position","top","bottom","width"],"sources":["/Users/steven/Documents/GitHub/RemyGram/basic/src/components/PopupMap.js"],"sourcesContent":["// PopupMap.js\nimport React, { useEffect, useState } from 'react';\nimport mapboxgl from 'mapbox-gl';\nimport 'mapbox-gl/dist/mapbox-gl.css';\n\nconst PopupMap = () => {\n  const [popupPosts, setPopupPosts] = useState([]);\n\n  // Use a simplified dummy data for testing\n  const dummyPopupPosts = [\n    { title: 'Dummy Point 1', description: 'This is the first dummy point', coordinates: [-71.118, 42.375] },\n    { title: 'Dummy Point 2', description: 'This is the second dummy point', coordinates: [-71.115, 42.378] },\n  ];\n\n  useEffect(() => {\n    // Simulate fetching previously submitted popup posts from the database\n    setPopupPosts(dummyPopupPosts);\n  }, []);\n\n  useEffect(() => {\n    mapboxgl.accessToken = 'pk.eyJ1Ijoid3d3c3NzIiwiYSI6ImNscGl0YjQybDAybWcybG91Ynd6bTAxeWMifQ.b4pItpBiNsKBSQ2bmV-Wuw';\n\n    const bounds = [\n      [-71.119340, 42.373465],\n      [-71.114128, 42.380368]\n    ];\n\n    const map = new mapboxgl.Map({\n      container: 'popup-map-container',\n      style: 'mapbox://styles/mapbox/streets-v12',\n      center: [-71.11671, 42.37443],\n      zoom: 15,\n      maxBounds: bounds,\n    });\n\n    if (popupPosts.length > 0) {\n      // Add a layer for previously submitted popup posts\n      map.on('load', () => {\n        map.addLayer({\n          id: 'previousPopups',\n          type: 'symbol',\n          source: {\n            type: 'geojson',\n            data: {\n              type: 'FeatureCollection',\n              features: popupPosts.map((post) => ({\n                type: 'Feature',\n                geometry: {\n                  type: 'Point',\n                  coordinates: post.coordinates\n                },\n                properties: {\n                  title: post.title,\n                  description: post.description\n                }\n              }))\n            }\n          },\n          layout: {\n            'icon-image': 'marker-15',\n            'text-field': ['get', 'title'],\n            'text-font': ['Open Sans Semibold', 'Arial Unicode MS Bold'],\n            'text-offset': [0, 1.5],\n            'text-anchor': 'top'\n          }\n        });\n\n        // Create a popup on click for previously submitted popup posts\n        map.on('click', 'previousPopups', (e) => {\n          const coordinates = e.features[0].geometry.coordinates.slice();\n          const description = e.features[0].properties.description;\n\n          new mapboxgl.Popup()\n            .setLngLat(coordinates)\n            .setHTML(`<h1>${description}</h1>`)\n            .addTo(map);\n        });\n\n        // Change the cursor to a pointer when hovering over the previousPopups layer\n        map.on('mouseenter', 'previousPopups', () => {\n          map.getCanvas().style.cursor = 'pointer';\n        });\n\n        // Change it back to the default cursor when leaving the previousPopups layer\n        map.on('mouseleave', 'previousPopups', () => {\n          map.getCanvas().style.cursor = '';\n        });\n      });\n    }\n\n    // Cleanup the map on component unmount\n    return () => map.remove();\n  }, [popupPosts]);\n\n  return <div id=\"popup-map-container\" style={{ position: 'absolute', top: 0, bottom: 0, width: '100%' }} />;\n};\n\nexport default PopupMap;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}